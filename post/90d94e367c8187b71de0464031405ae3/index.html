<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="theme-color" content="#202020"><meta http-equiv="x-ua-compatible" content="ie=edge"><title>jQuery 折腾小记 - 嘀咕</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.7.0/style.min.css"><link rel="stylesheet" href="/css/forever.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><meta name="generator" content="Hexo 7.1.1"></head><body><div class="wrap flex fd-c fai-c my-4 gap-4"><header class="flex fd-r fai-c fjc-sb mt-4 mb-8 gap-8"><div class="logo mb-1"><a class="flex px-2" href="/"><div class="draw"><div class="ghost"><div class="body"><div class="face"><div class="eyes"><span></span><span></span></div><div class="mouth"></div></div><div class="hands"> </div></div><div class="feet"><span></span><span></span><span></span><span></span></div></div></div><span class="name flex fjc-c fai-c">嘀咕</span></a></div><ul class="flex m-0 p-0 ta-c gap-6"><li><a href="/">首页</a></li><li><a href="/says">碎语</a></li><li><a href="/archives">归档</a></li><li><a href="/friends">朋友</a></li><li><a href="/about">关于</a></li></ul></header><main><article><div class="header flex fd-c fai-c"><h1 class="my-0">jQuery 折腾小记</h1><time datetime="2010-06-28T15:30:24.000Z">2010-06-28 23:30</time></div><div class="content mt-6"><p>“Wordpress是一个要不断折腾的程序”，是的，自从爱上了强大的jQuery以后，对Wordpress的折腾一发不可收拾。如果要找个折腾的理由，那么我想说：jQuery库这么大，要物尽其用嘛。</p>
<h2 id="超链接向右侧平滑移动"><a href="#超链接向右侧平滑移动" class="headerlink" title="超链接向右侧平滑移动"></a>超链接向右侧平滑移动</h2><p>其效果见侧栏除标签云的任何超链接，鼠标放上去后会向右侧平滑移动5px。</p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="javascript"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div><pre class="language-javascript m-0 mr-4 py-1" data-language="javascript"><code class="language-javascript p-0"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hover</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        <span class="token string-property property">'left'</span><span class="token operator">:</span> <span class="token string">'5px'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'fast'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        <span class="token string-property property">'left'</span><span class="token operator">:</span> <span class="token string">'0px'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token string">'fast'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div>

<h2 id="超链接的载入提示"><a href="#超链接的载入提示" class="headerlink" title="超链接的载入提示"></a>超链接的载入提示</h2><p>以前发过一篇文章《<a target="_blank" rel="noopener" href="http://jan.cm/2010/05/loading-hyperlink-tips/">超链接的载入提示</a>》，大家看这里就可以了。</p>
<h2 id="点击后显示-EMAIL"><a href="#点击后显示-EMAIL" class="headerlink" title="点击后显示 EMAIL"></a>点击后显示 EMAIL</h2><p>为了公开自己的Email却又不想让软件搜索到，大家常用的办法就是把EMAIL地址弄成图片的形式发布出来，这样的话基本就不会被搜索到了。但是有个问题，就是真正想发给你的人不能复制你的邮箱，只能对着上面一个字一个字的敲出来，这样是不是很麻烦？下面这段代码的作用就是让大家贴出文本EMAIL，却又不能被搜索到的方法。</p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="javascript"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div><pre class="language-javascript m-0 mr-4 py-1" data-language="javascript"><code class="language-javascript p-0"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".myemail"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token string">"i"</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token string">"jan.cm"</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">+</span> <span class="token string">"@"</span> <span class="token operator">+</span> <span class="token constant">B</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> <span class="token constant">D</span> <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".myemail"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">D</span><span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">D</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">D</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> <span class="token string">"mailto:"</span> <span class="token operator">+</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unbind</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">D</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token comment">//这个1000是淡出的时间，单位毫秒；</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div>

<h2 id="图片悬停半透明"><a href="#图片悬停半透明" class="headerlink" title="图片悬停半透明"></a>图片悬停半透明</h2><p>效果大家把鼠标放在侧栏上面的广告图片或者用户评论排行榜的头像上就看得到，鼠标放上去后会出现半透明的效果。 </p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="javascript"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div><pre class="language-javascript m-0 mr-4 py-1" data-language="javascript"><code class="language-javascript p-0"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hover</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        <span class="token string-property property">'opacity'</span><span class="token operator">:</span> <span class="token number">.5</span><span class="token comment">//鼠标放上去后，透明度50%；</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        <span class="token string-property property">'opacity'</span><span class="token operator">:</span> <span class="token number">1</span><span class="token comment">//鼠标移除后，不透明；</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div>

<h2 id="超链接新窗口打开"><a href="#超链接新窗口打开" class="headerlink" title="超链接新窗口打开"></a>超链接新窗口打开</h2><p>如果一个超链接不去设置target属性为新窗口打开的话，那么这些超链接点击后都会在原窗口打开，这样的话用户体验感很不好，以前我的做法是装了一个插件，但是作为喜欢折腾的人，插件能少一个是一个。用jQuery简单的一句代码就能搞定这个问题，何乐而不为呢？</p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="javascript"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span></div><pre class="language-javascript m-0 mr-4 py-1" data-language="javascript"><code class="language-javascript p-0"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'a)'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">"_blank"</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div>

<h2 id="相关日志显示隐藏"><a href="#相关日志显示隐藏" class="headerlink" title="相关日志显示隐藏"></a>相关日志显示隐藏</h2><p>点击相关日志，可以使相关日志隐藏或者显示，这个纯属好玩。</p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="javascript"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span></div><pre class="language-javascript m-0 mr-4 py-1" data-language="javascript"><code class="language-javascript p-0"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".related_post_title"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".related_post"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideToggle</span><span class="token punctuation">(</span><span class="token string">"slow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre></div></div>

<p>这里还有一个加强版的，使用Cookie来记录用户的操作，点击隐藏后，下次再进入到相关页面，将会一直隐藏，直到Cookie过期或者用户自己再次点击显示。使用加强版还需要加载一个jQuery的插件<a target="_blank" rel="noopener" href="http://www.box.net/shared/3075pe7bpp">jQuery.cookie.js</a>，另外非常郁闷，jQuery这么强大的库为什么就没有操作Cookie的相关函数呢？</p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="javascript"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div><pre class="language-javascript m-0 mr-4 py-1" data-language="javascript"><code class="language-javascript p-0"><span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'relatedposts'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'hide'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".related_post"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".related_post"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".related_post_title"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".related_post"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideToggle</span><span class="token punctuation">(</span><span class="token string">"slow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'relatedposts'</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'hide'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        $<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'relatedposts'</span><span class="token punctuation">,</span> <span class="token string">'show'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">expires</span><span class="token operator">:</span> <span class="token number">72</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">,</span><span class="token comment">//Cookie的生命周期，单位毫秒，下面一样的；</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        $<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'relatedposts'</span><span class="token punctuation">,</span> <span class="token string">'hide'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
            <span class="token literal-property property">expires</span><span class="token operator">:</span> <span class="token number">72</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">,</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div>

<p>这里要注意的是选择器的问题，上面的代码，全部都是$(‘XXX’)开头，这些就是选择器，选择哪些地方起到作用，如果有不明白的去<a target="_blank" rel="noopener" href="http://jan.cm/box/">这里</a>的帮助文档文件夹下载一个jQuery的帮助文档看看吧，欢迎大家多多交流。</p>
<p>就写这么多吧，其实还有一些，不过那些基本都是直接Copy过来的，自己也没研究过，或者是没研究明白。以后还继续折腾，比如页面载入提示、当前页面的锚记平滑滚动、滑过评论显示回复按钮等等，很多很多等着我折腾呢，呵呵。</p>
</div></article><div class="end flex fai-c fjc-c mb-4"><span class="flex fai-c fjc-c my-4 o2">THE-END</span></div><div class="tags my-4"><ul class="flex fjc-c fd-r gap-4"><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/jquery/"><span>jquery<sup>7</sup></span></a></li><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/hack/"><span>hack<sup>7</sup></span></a></li><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/wordpress/"><span>wordpress<sup>12</sup></span></a></li><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/%E6%8A%98%E8%85%BE/"><span>折腾<sup>14</sup></span></a></li></ul></div><div class="near flex fjc-sb mb-4"><div class="prev"><a href="/post/bdc6a01fd2b88fb7f69fe79f86811ef2/" ref="prev"><div class="text fw-b">PREVIOUS</div><div class="name">简单的分享与收藏</div></a></div><div class="next"><a href="/post/5a1e7805a959f67882d0fd46f3414e04/" ref="next"><div class="text">NEXT</div><div class="name">简单方法开启 Gzip 压缩</div></a></div></div><div class="comments"><div class="comment-items"><h2 class="pl-2">评论列表</h2><div class="not-found flex fai-c fjc-c">「此时无声胜有声」</div></div></div></main><footer class="flex fjc-c"><div class="copyright"><p>© 2007 - 现在 <a href="">嘀咕</a></p></div></footer><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script><script type="text/javascript" src="/js/forever.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-lazyload@1.9.7/jquery.lazyload.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script></div></body></html>