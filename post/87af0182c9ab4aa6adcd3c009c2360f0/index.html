<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="theme-color" content="#202020"><meta http-equiv="x-ua-compatible" content="ie=edge"><title>嘀咕虫洞 - 评论是否来自虫洞的另一端？ - 嘀咕</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.7.0/style.min.css"><link rel="stylesheet" href="/css/forever.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><meta name="generator" content="Hexo 7.1.1"></head><body><div class="wrap flex fd-c fai-c my-4 gap-4"><header class="flex fd-r fai-c fjc-sb mt-4 mb-8 gap-8"><div class="logo mb-1"><a class="flex px-2" href="/"><div class="draw"><div class="ghost"><div class="body"><div class="face"><div class="eyes"><span></span><span></span></div><div class="mouth"></div></div><div class="hands"> </div></div><div class="feet"><span></span><span></span><span></span><span></span></div></div></div><span class="name flex fjc-c fai-c">嘀咕</span></a></div><ul class="flex m-0 p-0 ta-c gap-6"><li><a href="/">首页</a></li><li><a href="/says">碎语</a></li><li><a href="/archives">归档</a></li><li><a href="/friends">朋友</a></li><li><a href="/about">关于</a></li></ul></header><main><article><div class="header flex fd-c fai-c"><h1 class="my-0">嘀咕虫洞 - 评论是否来自虫洞的另一端？</h1><time datetime="2022-09-18T14:43:00.000Z">2022-09-18 22:43</time></div><div class="content mt-6"><p><a target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a>，大部分博友应该都不陌生，是一项很有意义的活动。活动的目标是让大家保持博客的更新与活力，长期地存在下去。</p>
<p>十年之约中有相当多的成员加入，但是想要去访问这些成员的博客，却是一件极其不方便的事情，于是十年之约推出了一个名叫<a target="_blank" rel="noopener" href="https://foreverblog.cn/go.html">虫洞</a>的服务。开启虫洞，即可随机跳转到十年之约正式成员的博客，虫洞服务是连接两个未知空间的隧道，让独立博客并不孤独。</p>
<p>为了记录并展示访客是否来自虫洞，开发了一款嘀咕虫洞。该插件是通过<code>referer</code>的来判断是否来自虫洞，如果来自虫洞，则记录在 <strong>Cookie</strong> 中，并且发布评论的时候会把 <strong>foreverblog</strong> 追加在 UserAgent 中保存。</p>
<h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><ul class="gallery gallery-1 gap-1"><li><a class="image" target="_blank" rel="noopener" href="https://digu-image-host.s3.bitiful.net/2022/09/87af0182c9ab4aa6adcd3c009c2360f0/9ea3377b3f9243b4b4f4cd7486ff74c2.png!style:original" data-fancybox="gallery"><img class="lazy br-1" data-original="https://digu-image-host.s3.bitiful.net/2022/09/87af0182c9ab4aa6adcd3c009c2360f0/9ea3377b3f9243b4b4f4cd7486ff74c2.png!style:definition" src="https://digu-image-host.s3.bitiful.net/2022/09/87af0182c9ab4aa6adcd3c009c2360f0/9ea3377b3f9243b4b4f4cd7486ff74c2.png!style:thumbnail" alt=""></a></li></ul>

<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p>插件安装好之后，在模板中需要展示的地方加入如下代码：</p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="php"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span></div><pre class="language-php m-0 mr-4 py-1" data-language="php"><code class="language-php p-0"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">stripos</span><span class="token punctuation">(</span><span class="token variable">$comments</span><span class="token operator">-></span><span class="token property">agent</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'foreverblog'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token delimiter important">?></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">_e</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'虫洞'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">endif</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span></code></pre></div></div>

<p>具体效果根据自身需要来修改，也许可以更酷炫。</p>
<h2 id="下载链接"><a href="#下载链接" class="headerlink" title="下载链接"></a>下载链接</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/binjoo/typecho-plugins/releases/download/latest/DiguWormhole.zip">Github</a></li>
<li><a target="_blank" rel="noopener" href="https://app.box.com/s/192xbtptf5rzu85csl2sdfuidttw5g9d">BoxCN</a></li>
</ul>
</div></article><div class="end flex fai-c fjc-c mb-4"><span class="flex fai-c fjc-c my-4 o2">THE-END</span></div><div class="tags my-4"><ul class="flex fjc-c fd-r gap-4"><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/%E6%8F%92%E4%BB%B6/"><span>插件<sup>13</sup></span></a></li><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/Typecho/"><span>Typecho<sup>12</sup></span></a></li></ul></div><div class="near flex fjc-sb mb-4"><div class="prev"><a href="/post/e10379ef9de04515a9ecfd3466718efc/" ref="prev"><div class="text fw-b">PREVIOUS</div><div class="name">与京东斗智斗勇</div></a></div><div class="next"><a href="/post/4573aae9e71949c2bee3302f62551749/" ref="next"><div class="text">NEXT</div><div class="name">这回是真的开学了</div></a></div></div><div class="comments"><div class="comment-items"><h2 class="pl-2">评论列表</h2><div class="not-found flex fai-c fjc-c">「此时无声胜有声」</div></div></div></main><footer class="flex fjc-c"><div class="copyright"><p>© 2007 - 现在 <a href="">嘀咕</a></p></div></footer><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script><script type="text/javascript" src="/js/forever.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-lazyload@1.9.7/jquery.lazyload.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script></div></body></html>