<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="theme-color" content="#202020"><meta http-equiv="x-ua-compatible" content="ie=edge"><title>让 WP-Syntax 滑动显示隐藏 - 嘀咕</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.7.0/style.min.css"><link rel="stylesheet" href="/css/forever.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><meta name="generator" content="Hexo 7.1.1"></head><body><div class="wrap flex fd-c fai-c my-4 gap-4"><header class="flex fd-r fai-c fjc-sb mt-4 mb-8 gap-8"><div class="logo mb-1"><a class="flex px-2" href="/"><div class="draw"><div class="ghost"><div class="body"><div class="face"><div class="eyes"><span></span><span></span></div><div class="mouth"></div></div><div class="hands"> </div></div><div class="feet"><span></span><span></span><span></span><span></span></div></div></div><span class="name flex fjc-c fai-c">嘀咕</span></a></div><ul class="flex m-0 p-0 ta-c gap-6"><li><a href="/">首页</a></li><li><a href="/says">碎语</a></li><li><a href="/archives">归档</a></li><li><a href="/friends">朋友</a></li><li><a href="/about">关于</a></li></ul></header><main><article><div class="header flex fd-c fai-c"><h1 class="my-0">让 WP-Syntax 滑动显示隐藏</h1><time datetime="2010-07-09T18:15:00.000Z">2010-07-10 02:15</time></div><div class="content mt-6"><p>这两天无所事事，不知道干些什么。</p>
<p>在QQLive上把<a target="_blank" rel="noopener" href="http://movie.douban.com/subject/3227335/">《仙剑奇侠传三》</a>看完了，我承认我很out，去年的流行电视剧，我今年才看完。打开博客，我望着它，它盯着我，我们俩就这样僵持了近5秒钟，我实在受不了了，对它说：“丫的，你再看我就折腾你。”结果你们能想到，所以，我开始折腾它了。</p>
<p>这个想法是昨天在某博客上看了代码都产生的，那超长的代码，没有格式化，没有高亮，看着我脑袋都大了，几段代码下来才发现，很多都TM是废话，关键代码就那么一句，害得我找了半天。心想，如果有个隐藏部分代码就好了，所以呢，我就在我博客上折腾了。</p>
<p>我用的代码高亮插件是<a target="_blank" rel="noopener" href="http://wordpress.org/extend/plugins/wp-syntax/">WP-Syntax</a>，首先打开该插件目录下的<code>wp-syntax.php</code>文件，搜索如下代码，大改在 123 行左右：<code>$output .= ;</code>将此段代码修改成：<code>$output .= strtoupper($geshi-&gt;language);</code></p>
<p>保存，看看是不是在 CODE 显示的地方多了一个类似标题的东西。 好了，截下来我们开始做显示隐藏的功能，这里就要用到人见人爱车见车载花见花开的 jQuery ，用 jQuery 前要导入什么，这里就不啰嗦了，直接看代码。</p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="javascript"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span></div><pre class="language-javascript m-0 mr-4 py-1" data-language="javascript"><code class="language-javascript p-0"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">".wp_syntax .code_title"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">".code"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slideToggle</span><span class="token punctuation">(</span><span class="token string">"slow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre></div></div>

<p>再保存，刷新页面，点击代码标题就可以看到效果了，剩下的就是美化了，因主题不同而异，我贴出我的 CSS 供大家参考一下。</p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="css"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span><span></span><span></span><span></span></div><pre class="language-css m-0 mr-4 py-1" data-language="css"><code class="language-css p-0"><span class="token selector">.wp_syntax .code_title</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background</span><span class="token punctuation">:</span>#CCC<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span>pointer<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span>#2971A5<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre></div></div>
<p>其实呢，我还想在标题的最右边弄一个显示&#x2F;隐藏的提示，但是弄出来 IE 下会错位，归根结底还是 CSS 不会写的问题，Firefox 下显示正常，到了 IE 下就会跑到下一行去，郁闷。哪位兄弟可以帮忙解决一下啊。 嗯，就到这里吧，折腾完毕，如果你不喜欢用插件，也可以试试 <a target="_blank" rel="noopener" href="http://fayaa.com/code/new/">代码发芽网</a> 代码高亮功能，不过我不怎么喜欢用，感觉一大堆的HTML代码贴进来怪怪的。 </p>
<h2 id="看看博友"><a href="#看看博友" class="headerlink" title="看看博友"></a>看看博友</h2><p><a target="_blank" rel="noopener" href="http://www.dt-life.info/">zchiy2k</a> 写的<a target="_blank" rel="noopener" href="http://www.dt-life.info/sliding-effect-for-code-box-of-the-wp-snytax.html">《为WP-Snytax代码框增加滑动效果》</a>，他碰到了滚动条的问题，说不定对你有帮助。</p>
</div></article><div class="end flex fai-c fjc-c mb-4"><span class="flex fai-c fjc-c my-4 o2">THE-END</span></div><div class="tags my-4"><ul class="flex fjc-c fd-r gap-4"><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/jquery/"><span>jquery<sup>7</sup></span></a></li><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/hack/"><span>hack<sup>7</sup></span></a></li><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/wordpress/"><span>wordpress<sup>12</sup></span></a></li><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/WP-Syntax/"><span>WP-Syntax<sup>1</sup></span></a></li></ul></div><div class="near flex fjc-sb mb-4"><div class="prev"><a href="/post/146c652eee01be17e923540fc6673b42/" ref="prev"><div class="text fw-b">PREVIOUS</div><div class="name">站内的 Box.net 外链网盘</div></a></div><div class="next"><a href="/post/8ec834d1dd323d2d28d02530f9512119/" ref="next"><div class="text">NEXT</div><div class="name">白天晚上不同的背景</div></a></div></div><div class="comments"><div class="comment-items"><h2 class="pl-2">评论列表</h2><div class="not-found flex fai-c fjc-c">「此时无声胜有声」</div></div></div></main><footer class="flex fjc-c"><div class="copyright"><p>© 2007 - 现在 <a href="">嘀咕</a></p></div></footer><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script><script type="text/javascript" src="/js/forever.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-lazyload@1.9.7/jquery.lazyload.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script></div></body></html>