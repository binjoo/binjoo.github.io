<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="theme-color" content="#202020"><meta http-equiv="x-ua-compatible" content="ie=edge"><title>免插件实现日志分页导航 - 嘀咕</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.7.0/style.min.css"><link rel="stylesheet" href="/css/forever.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><meta name="generator" content="Hexo 7.1.1"></head><body><div class="wrap flex fd-c fai-c my-4 gap-4"><header class="flex fd-r fai-c fjc-sb mt-4 mb-8 gap-8"><div class="logo mb-1"><a class="flex px-2" href="/"><div class="draw"><div class="ghost"><div class="body"><div class="face"><div class="eyes"><span></span><span></span></div><div class="mouth"></div></div><div class="hands"> </div></div><div class="feet"><span></span><span></span><span></span><span></span></div></div></div><span class="name flex fjc-c fai-c">嘀咕</span></a></div><ul class="flex m-0 p-0 ta-c gap-6"><li><a href="/">首页</a></li><li><a href="/says">碎语</a></li><li><a href="/archives">归档</a></li><li><a href="/friends">朋友</a></li><li><a href="/about">关于</a></li></ul></header><main><article><div class="header flex fd-c fai-c"><h1 class="my-0">免插件实现日志分页导航</h1><time datetime="2010-05-22T09:42:05.000Z">2010-05-22 17:42</time></div><div class="content mt-6"><p>昨天开始，就一直在折腾博客，蛋疼的又换了个主题，这次是比较经典的 inove。为什么又要换主题？<a target="_blank" rel="noopener" href="http://www.forece.net/">Forece</a>这家伙的主题和我的撞墙了，没办法，他是大哥，所以只能我换。（其实早就想换了，这下有个借口比较好，把责任推卸掉。） 闲话不说了，进入主题。用 wordpress 的人都应该知道 WP-Pagenavi 这个插件，他的效果是可以实现分页导航，插件一安装，效果就能够出现了。用久了 wordpress ，大家就会开始追求速度了，减少一切不必要的插件，但是减来减去发现没几个是没用的。 大家用了如下方法，可以把 WP-Pagenavi 这个插件丢掉了。 首先在你当前主题的 functions.php 中任意地方，加入如下代码： </p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="php"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div><pre class="language-php m-0 mr-4 py-1" data-language="php"><code class="language-php p-0"><span class="token comment">//分页导航</span>
<span class="token keyword">function</span> <span class="token function-definition function">par_pagenavi</span><span class="token punctuation">(</span><span class="token variable">$range</span> <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
	<span class="token keyword">global</span> <span class="token variable">$paged</span><span class="token punctuation">,</span> <span class="token variable">$wp_query</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token variable">$max_page</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token variable">$max_page</span> <span class="token operator">=</span> <span class="token variable">$wp_query</span><span class="token operator">-></span><span class="token property">max_num_pages</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$max_page</span> <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token variable">$paged</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token variable">$paged</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$paged</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"&amp;lt;a href='"</span> <span class="token operator">.</span> <span class="token function">get_pagenum_link</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"' class='extend' title='跳转到首页'> 返回首页 &amp;lt;/a>"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span>
	<span class="token function">previous_posts_link</span><span class="token punctuation">(</span><span class="token string single-quoted-string">' 上一页 '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$max_page</span> <span class="token operator">></span> <span class="token variable">$range</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$paged</span> <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span> <span class="token variable">$range</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token variable">$range</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"&amp;lt;a href='"</span> <span class="token operator">.</span> <span class="token function">get_pagenum_link</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span> <span class="token operator">.</span><span class="token string double-quoted-string">"'"</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">==</span><span class="token variable">$paged</span><span class="token punctuation">)</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">" class='current'"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"><span class="token interpolation"><span class="token variable">$i</span></span>"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
    <span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">$paged</span> <span class="token operator">>=</span> <span class="token punctuation">(</span><span class="token variable">$max_page</span> <span class="token operator">-</span> <span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$range</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token variable">$max_page</span> <span class="token operator">-</span> <span class="token variable">$range</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token variable">$max_page</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"&amp;lt;a href='"</span> <span class="token operator">.</span> <span class="token function">get_pagenum_link</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span> <span class="token operator">.</span><span class="token string double-quoted-string">"'"</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">==</span><span class="token variable">$paged</span><span class="token punctuation">)</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">" class='current'"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"><span class="token interpolation"><span class="token variable">$i</span></span>"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
	<span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">$paged</span> <span class="token operator">>=</span> <span class="token variable">$range</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$paged</span> <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token variable">$max_page</span> <span class="token operator">-</span> <span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$range</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token variable">$paged</span> <span class="token operator">-</span> <span class="token function">ceil</span><span class="token punctuation">(</span><span class="token variable">$range</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token variable">$paged</span> <span class="token operator">+</span> <span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">$range</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"&amp;lt;a href='"</span> <span class="token operator">.</span> <span class="token function">get_pagenum_link</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span> <span class="token operator">.</span><span class="token string double-quoted-string">"'"</span><span class="token punctuation">;</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">==</span><span class="token variable">$paged</span><span class="token punctuation">)</span> <span class="token keyword">echo</span> <span class="token string double-quoted-string">" class='current'"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"><span class="token interpolation"><span class="token variable">$i</span></span>"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
    <span class="token keyword">else</span><span class="token punctuation">&#123;</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&amp;</span>lt<span class="token punctuation">;</span> <span class="token operator">=</span> <span class="token variable">$max_page</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"&amp;lt;a href='"</span> <span class="token operator">.</span> <span class="token function">get_pagenum_link</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span> <span class="token operator">.</span><span class="token string double-quoted-string">"'"</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">==</span><span class="token variable">$paged</span><span class="token punctuation">)</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">" class='current'"</span><span class="token punctuation">;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"><span class="token interpolation"><span class="token variable">$i</span></span>"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
	<span class="token function">next_posts_link</span><span class="token punctuation">(</span><span class="token string single-quoted-string">' 下一页 '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$paged</span> <span class="token operator">!=</span> <span class="token variable">$max_page</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">echo</span> <span class="token string double-quoted-string">"&amp;lt;a href='"</span> <span class="token operator">.</span> <span class="token function">get_pagenum_link</span><span class="token punctuation">(</span><span class="token variable">$max_page</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"' class='extend' title='跳转到最后一页'> 最后一页 &amp;lt;/a>"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre></div></div>

<p>然后在你需要使用分页导航的地方（一般是index.php、category.php、archive.php、search.php）加入如下代码：<code>&lt;?php par_pagenavi(9) ?&gt;</code> 最后在加上漂亮的CSS，代码如下： </p>
<div class="code-block mb-6"><div class="header px-4 py-3" data-language="css"><span></span><span></span><span></span></div><div class="body flex fd-r"><div class="line-numbers py-1 mx-3"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></div><pre class="language-css m-0 mr-4 py-1" data-language="css"><code class="language-css p-0"><span class="token comment">/* page_navi start*/</span>
<span class="token selector">#pagenavi</span> <span class="token punctuation">&#123;</span>
	<span class="token property">border-top</span><span class="token punctuation">:</span>1px solid #CCC<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span>36px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span>36px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span>1em<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">#pagenavi a</span><span class="token punctuation">&#123;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span>3px 8px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span>2px<span class="token punctuation">;</span>
  <span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span>
	<span class="token property">border</span><span class="token punctuation">:</span> 1px solid #BFBFBF<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">#pagenavi a:hover, #pagenavi a.current</span><span class="token punctuation">&#123;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #F7F7F7<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #356aa0<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span>#356aa0<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span>bolder<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/* page_navi end*/</span></code></pre></div></div>
<p>好了，改完收工。 这方法具体来至哪里我也不记得了，在<a target="_blank" rel="noopener" href="http://immmmm.com/">五木</a>那里也发现了这个，大家可以去<a target="_blank" rel="noopener" href="http://immmmm.com/wordpress-page-navigation-without-plugins.html">围观</a>，不过没什么区别，嘿嘿。</p>
</div></article><div class="end flex fai-c fjc-c mb-4"><span class="flex fai-c fjc-c my-4 o2">THE-END</span></div><div class="tags my-4"><ul class="flex fjc-c fd-r gap-4"><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/wordpress/"><span>wordpress<sup>12</sup></span></a></li><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/%E6%8A%98%E8%85%BE/"><span>折腾<sup>14</sup></span></a></li><li><a class="py-1 px-4 flex fd-c fai-c" href="/tags/%E5%88%86%E9%A1%B5/"><span>分页<sup>1</sup></span></a></li></ul></div><div class="near flex fjc-sb mb-4"><div class="prev"><a href="/post/e7ec32a92cca945ca0a231e38ead5005/" ref="prev"><div class="text fw-b">PREVIOUS</div><div class="name">超链接的载入提示</div></a></div><div class="next"><a href="/post/a9f17d17a8347cfaf1b3ba37394199d6/" ref="next"><div class="text">NEXT</div><div class="name">今天二十二岁了</div></a></div></div><div class="comments"><div class="comment-items"><h2 class="pl-2">评论列表</h2><div class="not-found flex fai-c fjc-c">「此时无声胜有声」</div></div></div></main><footer class="flex fjc-c"><div class="copyright"><p>© 2007 - 现在 <a href="">嘀咕</a></p></div></footer><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script><script type="text/javascript" src="/js/forever.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-lazyload@1.9.7/jquery.lazyload.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script></div></body></html>